/*
 * The MIT License (MIT)
 *
 * Copyright (c) 2015 - Cyril Mizzi <cyril@lesiteimmo.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
(function(){var t,e=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};window.Tag=t=function(){function t(t,e){var n;this.element=t,this.options=e,n=this,this.options=this.configureOptions(),this.container=document.createElement("ul"),this.element.parentNode.insertBefore(this.container,this.element.nextSibling),this.container.style.position="relative",this.container.style.left=0,this.container.style.height="auto",this.container.style.minHeight=this.element.offsetHeight+"px",this.container.classList.add("tag-input"),this.container.classList.add("container"),this.container.addEventListener("click",function(t){return t.target===n.container?n.createTag():void 0}),this.container.addEventListener("mousedown",function(t){return t.target===n.container?t.preventDefault():void 0})}return t.prototype.element=null,t.prototype.options=null,t.prototype.defaultOptions={tooltip:!0,tooltipText:"Right click to delete",formSeparator:",",nextTagCodes:[13,188]},t.prototype.configureOptions=function(){var t,e,n,i;if(e=this.defaultOptions,"object"!=typeof this.options)return e;i=this.options;for(t in i){if(n=i[t],!e[t])throw"`"+t+"` options doesn't exist";e[t]=n}return e},t.prototype.createTag=function(){var t,n,i,o;return i=this,n=document.createElement("li"),n.classList.add("tag-input"),n.classList.add("tag"),t=document.createElement("span"),t.classList.add("tag-content"),t.contentEditable=!0,n.appendChild(t),this.container.appendChild(n),this.options.tooltip&&(o=document.createElement("span"),o.classList.add("tag-tooltip"),o.innerHTML=this.options.tooltipText,n.appendChild(o)),this.createFocus(n),n.firstChild.addEventListener("blur",function(){return n.firstChild.innerHTML?i.fillInput():void n.remove()}),n.addEventListener("keydown",function(t){var o;return o=t.keyCode,e.call(i.options.nextTagCodes,o)>=0&&(t.preventDefault(),n.firstChild.innerHTML)?(i.createTag(),!1):void 0}),n.addEventListener("contextmenu",function(t){return t.preventDefault(),n.remove(),i.fillInput(),!1})},t.prototype.createFocus=function(t){return t.firstChild.focus()},t.prototype.fillInput=function(){var t,e,n,i,o;for(o=this.container.childNodes,t=[],e=0,n=o.length;n>e;e++)i=o[e],t.push(i.firstChild.innerHTML);return this.element.setAttribute("value",t.join(this.options.formSeparator))},t.guess=function(e,n){var i,o,r,s;for(s=[],o=0,r=e.length;r>o;o++)i=e[o],s.push(new t(i,n));return s},t}(),new t.guess(document.querySelectorAll("[data-role=tagsinput]"))}).call(this);